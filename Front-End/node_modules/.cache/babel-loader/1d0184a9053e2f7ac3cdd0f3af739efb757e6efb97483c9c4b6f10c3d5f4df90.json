{"ast":null,"code":"import axios from \"axios\";\nexport const SET_USER_STARTED = \"SET_USER_STARTED\";\nexport const SET_USER_SUCCESS = \"SET_USER_SUCCESS\";\nexport const SET_USER_FAILURE = \"SET_USER_FAILURE\";\nexport const SET_USER = \"SET_USER\";\nexport const UPDATE_USERNAME_SUCCESS = \"UPDATE_USERNAME_SUCCESS\";\nexport const UPDATE_USERNAME_FAILURE = \"UPDATE_USERNAME_FAILURE\";\n// export const EDIT_USER = \"EDIT_USER\";\n\nexport const setUserStarted = () => ({\n  type: SET_USER_STARTED\n});\nexport const setUserSuccess = (user, token) => ({\n  type: SET_USER_SUCCESS,\n  payload: {\n    user: {\n      ...user,\n      userName: user.username\n    },\n    token\n  }\n});\nexport const setUserFailure = error => ({\n  type: SET_USER_FAILURE,\n  payload: error\n});\nexport const setUser = user => ({\n  type: SET_USER,\n  payload: user\n});\nexport const updateUserNameSucces = username => ({\n  type: UPDATE_USERNAME_SUCCESS,\n  payload: userName\n});\nexport const updateUserNameFailure = error => ({\n  type: UPDATE_USERNAME_FAILURE,\n  payload: error\n});\n\n//Action de connection\nexport const loginUSer = credentials => {\n  return dispatch => {\n    dispatch(setUserStarted());\n    axios.post(\"http://localhost:3001/api/v1/user/login\", credentials).then(response => {\n      const user = response.data;\n      if (user) {\n        dispatch(setUserSuccess(user));\n      } else {\n        dispatch(setUserFailure(\"Email ou Mot de passe invalide\"));\n      }\n    }).catch(error => {\n      setUserFailure(error);\n    });\n  };\n};\n\n//Mise a jorus des userName\nexport const userProfile = token => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      }\n    };\n    const {\n      data\n    } = await axios.post('http://localhost:3001/api/v1/user/profile', {\n      token\n    }, config);\n    dispatch({\n      type: UPDATE_USERNAME_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: UPDATE_USERNAME_FAILURE,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\n\n// export const editUser = (newName) => ({\n//   type: EDIT_USER,\n//   payload: newName,\n// });","map":{"version":3,"names":["axios","SET_USER_STARTED","SET_USER_SUCCESS","SET_USER_FAILURE","SET_USER","UPDATE_USERNAME_SUCCESS","UPDATE_USERNAME_FAILURE","setUserStarted","type","setUserSuccess","user","token","payload","userName","username","setUserFailure","error","setUser","updateUserNameSucces","updateUserNameFailure","loginUSer","credentials","dispatch","post","then","response","data","catch","userProfile","config","headers","Authorization","message"],"sources":["C:/Users/scicl/OneDrive/Bureau/ArgentBank-Website-Main-main/Front-End-Test/src/store/actions/actions.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const SET_USER_STARTED = \"SET_USER_STARTED\";\nexport const SET_USER_SUCCESS = \"SET_USER_SUCCESS\";\nexport const SET_USER_FAILURE = \"SET_USER_FAILURE\";\nexport const SET_USER = \"SET_USER\";\nexport const UPDATE_USERNAME_SUCCESS = \"UPDATE_USERNAME_SUCCESS\";\nexport const UPDATE_USERNAME_FAILURE = \"UPDATE_USERNAME_FAILURE\";\n// export const EDIT_USER = \"EDIT_USER\";\n\nexport const setUserStarted = () => ({\n  type: SET_USER_STARTED,\n});\n\nexport const setUserSuccess = (user, token) => ({\n  type: SET_USER_SUCCESS,\n  payload: { user: { ...user, userName: user.username }, token },\n});\n\nexport const setUserFailure = (error) => ({\n  type: SET_USER_FAILURE,\n  payload: error,\n});\n\nexport const setUser = (user) => ({\n  type: SET_USER,\n  payload: user,\n});\n\nexport const updateUserNameSucces = (username) => ({\n  type: UPDATE_USERNAME_SUCCESS,\n  payload: userName,\n});\n\nexport const updateUserNameFailure = (error) => ({\n  type: UPDATE_USERNAME_FAILURE,\n  payload: error,\n});\n\n//Action de connection\nexport const loginUSer = (credentials) => {\n  return (dispatch) => {\n    dispatch(setUserStarted());\n\n    axios\n      .post(\"http://localhost:3001/api/v1/user/login\", credentials)\n      .then((response) => {\n        const user = response.data;\n        if (user) {\n          dispatch(setUserSuccess(user));\n        } else {\n          dispatch(setUserFailure(\"Email ou Mot de passe invalide\"));\n        }\n      })\n      .catch((error) => {\n        setUserFailure(error);\n      });\n  };\n};\n\n//Mise a jorus des userName\nexport const userProfile = (token) => async (dispatch) => {\n  try {\n    const config = {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`,\n      },\n    }\n\n    const { data } = await axios.post(\n      'http://localhost:3001/api/v1/user/profile',\n      { token },\n      config\n    )\n\n    dispatch({ type: UPDATE_USERNAME_SUCCESS, payload: data })\n  } catch (error) {\n    dispatch({\n      type: UPDATE_USERNAME_FAILURE,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    })\n  }\n}\n\n// export const editUser = (newName) => ({\n//   type: EDIT_USER,\n//   payload: newName,\n// });\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,gBAAgB,GAAG,kBAAkB;AAClD,OAAO,MAAMC,gBAAgB,GAAG,kBAAkB;AAClD,OAAO,MAAMC,gBAAgB,GAAG,kBAAkB;AAClD,OAAO,MAAMC,QAAQ,GAAG,UAAU;AAClC,OAAO,MAAMC,uBAAuB,GAAG,yBAAyB;AAChE,OAAO,MAAMC,uBAAuB,GAAG,yBAAyB;AAChE;;AAEA,OAAO,MAAMC,cAAc,GAAGA,CAAA,MAAO;EACnCC,IAAI,EAAEP;AACR,CAAC,CAAC;AAEF,OAAO,MAAMQ,cAAc,GAAGA,CAACC,IAAI,EAAEC,KAAK,MAAM;EAC9CH,IAAI,EAAEN,gBAAgB;EACtBU,OAAO,EAAE;IAAEF,IAAI,EAAE;MAAE,GAAGA,IAAI;MAAEG,QAAQ,EAAEH,IAAI,CAACI;IAAS,CAAC;IAAEH;EAAM;AAC/D,CAAC,CAAC;AAEF,OAAO,MAAMI,cAAc,GAAIC,KAAK,KAAM;EACxCR,IAAI,EAAEL,gBAAgB;EACtBS,OAAO,EAAEI;AACX,CAAC,CAAC;AAEF,OAAO,MAAMC,OAAO,GAAIP,IAAI,KAAM;EAChCF,IAAI,EAAEJ,QAAQ;EACdQ,OAAO,EAAEF;AACX,CAAC,CAAC;AAEF,OAAO,MAAMQ,oBAAoB,GAAIJ,QAAQ,KAAM;EACjDN,IAAI,EAAEH,uBAAuB;EAC7BO,OAAO,EAAEC;AACX,CAAC,CAAC;AAEF,OAAO,MAAMM,qBAAqB,GAAIH,KAAK,KAAM;EAC/CR,IAAI,EAAEF,uBAAuB;EAC7BM,OAAO,EAAEI;AACX,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMI,SAAS,GAAIC,WAAW,IAAK;EACxC,OAAQC,QAAQ,IAAK;IACnBA,QAAQ,CAACf,cAAc,CAAC,CAAC,CAAC;IAE1BP,KAAK,CACFuB,IAAI,CAAC,yCAAyC,EAAEF,WAAW,CAAC,CAC5DG,IAAI,CAAEC,QAAQ,IAAK;MAClB,MAAMf,IAAI,GAAGe,QAAQ,CAACC,IAAI;MAC1B,IAAIhB,IAAI,EAAE;QACRY,QAAQ,CAACb,cAAc,CAACC,IAAI,CAAC,CAAC;MAChC,CAAC,MAAM;QACLY,QAAQ,CAACP,cAAc,CAAC,gCAAgC,CAAC,CAAC;MAC5D;IACF,CAAC,CAAC,CACDY,KAAK,CAAEX,KAAK,IAAK;MAChBD,cAAc,CAACC,KAAK,CAAC;IACvB,CAAC,CAAC;EACN,CAAC;AACH,CAAC;;AAED;AACA,OAAO,MAAMY,WAAW,GAAIjB,KAAK,IAAK,MAAOW,QAAQ,IAAK;EACxD,IAAI;IACF,MAAMO,MAAM,GAAG;MACbC,OAAO,EAAE;QACP,cAAc,EAAE,kBAAkB;QAClCC,aAAa,EAAG,UAASpB,KAAM;MACjC;IACF,CAAC;IAED,MAAM;MAAEe;IAAK,CAAC,GAAG,MAAM1B,KAAK,CAACuB,IAAI,CAC/B,2CAA2C,EAC3C;MAAEZ;IAAM,CAAC,EACTkB,MACF,CAAC;IAEDP,QAAQ,CAAC;MAAEd,IAAI,EAAEH,uBAAuB;MAAEO,OAAO,EAAEc;IAAK,CAAC,CAAC;EAC5D,CAAC,CAAC,OAAOV,KAAK,EAAE;IACdM,QAAQ,CAAC;MACPd,IAAI,EAAEF,uBAAuB;MAC7BM,OAAO,EACLI,KAAK,CAACS,QAAQ,IAAIT,KAAK,CAACS,QAAQ,CAACC,IAAI,CAACM,OAAO,GACzChB,KAAK,CAACS,QAAQ,CAACC,IAAI,CAACM,OAAO,GAC3BhB,KAAK,CAACgB;IACd,CAAC,CAAC;EACJ;AACF,CAAC;;AAED;AACA;AACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}