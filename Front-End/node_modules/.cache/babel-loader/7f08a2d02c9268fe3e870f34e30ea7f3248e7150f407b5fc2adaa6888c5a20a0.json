{"ast":null,"code":"import { USER_LOGIN_SUCCESS, USER_LOGIN_FAIL, USER_LOGOUT } from \"../reducers/loginReducer\";\nimport { USER_PROFILE_SUCCESS, USER_PROFILE_FAIL, USER_PROFILE_RESET, USER_PROFILE_UPDATE } from \"../reducers/userReducer\";\nimport axios from \"axios\";\nexport const loginUser = (email, password) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        \"Content-type\": \"application/json\"\n      }\n    };\n    const {\n      data\n    } = await axios.post(\"http://localhost:3001/api/v1/user/login\", {\n      email,\n      password\n    }, config);\n    dispatch({\n      type: USER_LOGIN_SUCCESS,\n      payload: data\n    });\n    dispatch(userProfile(data.body.token));\n  } catch (error) {\n    dispatch({\n      //SI elle echoue renvoie USER_LOGIN_FAIL\n      type: USER_LOGIN_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\n\n// User's profile action, appeller pour récupérer les infos de profil utilisateur depuis backend\nexport const userProfile = token => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      }\n    };\n    const {\n      data\n    } = await axios.post(\"http://localhost:3001/api/v1/user/profile\",\n    //Renvoie  requête POST, avec token auth dans les en-têtes\n    {\n      token\n    }, config);\n    dispatch({\n      type: USER_PROFILE_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_PROFILE_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\n\n// User's update profile, utilisé quand on veut mettre a jours son profil\nexport const updateUserProfile = (token, newUserName, newFirstName, newLastName) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      }\n    };\n    const {\n      data\n    } = await axios.put(\"http://localhost:3001/api/v1/user/profile\",\n    //Renvoie requête PUT avec le token auth en en-têtes\n    {\n      userName: newUserName,\n      firstName: newFirstName,\n      lastName: newLastName\n    }, config);\n    dispatch({\n      type: USER_PROFILE_UPDATE,\n      payload: data\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_PROFILE_FAIL,\n      payload: error.response && error.response.data.message ? error.response.data.message : error.message\n    });\n  }\n};\n\n// Logout action, appeller quand utilisateur se déconnecte\nexport const logout = () => async dispatch => {\n  //Renvoie 2 actions, un epour ce deco et une pour reset les infos a la déco\n  dispatch({\n    type: USER_LOGOUT\n  });\n  dispatch({\n    type: USER_PROFILE_RESET\n  });\n};","map":{"version":3,"names":["USER_LOGIN_SUCCESS","USER_LOGIN_FAIL","USER_LOGOUT","USER_PROFILE_SUCCESS","USER_PROFILE_FAIL","USER_PROFILE_RESET","USER_PROFILE_UPDATE","axios","loginUser","email","password","dispatch","config","headers","data","post","type","payload","userProfile","body","token","error","response","message","Authorization","updateUserProfile","newUserName","newFirstName","newLastName","put","userName","firstName","lastName","logout"],"sources":["C:/Users/scicl/OneDrive/Bureau/Projet11- ArgentBank/Front-End/src/store/actions/actions.js"],"sourcesContent":["import {\n  USER_LOGIN_SUCCESS,\n  USER_LOGIN_FAIL,\n  USER_LOGOUT,\n} from \"../reducers/loginReducer\";\nimport {\n  USER_PROFILE_SUCCESS,\n  USER_PROFILE_FAIL,\n  USER_PROFILE_RESET,\n  USER_PROFILE_UPDATE,\n} from \"../reducers/userReducer\";\nimport axios from \"axios\";\n\n\nexport const loginUser = (email, password) => async (dispatch) => {\n  try {\n    const config = {\n      headers: {\n        \"Content-type\": \"application/json\",\n      },\n    };\n\n    const { data } = await axios.post(\n      \"http://localhost:3001/api/v1/user/login\",\n\n      { email, password },\n      config\n    );\n\n    dispatch({ type: USER_LOGIN_SUCCESS, payload: data });\n    dispatch(userProfile(data.body.token));\n  } catch (error) {\n    dispatch({\n      //SI elle echoue renvoie USER_LOGIN_FAIL\n      type: USER_LOGIN_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n\n// User's profile action, appeller pour récupérer les infos de profil utilisateur depuis backend\nexport const userProfile = (token) => async (dispatch) => {\n  try {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`,\n      },\n    };\n\n    const { data } = await axios.post(\n      \"http://localhost:3001/api/v1/user/profile\", //Renvoie  requête POST, avec token auth dans les en-têtes\n      { token },\n      config\n    );\n\n    dispatch({ type: USER_PROFILE_SUCCESS, payload: data });\n  } catch (error) {\n    dispatch({\n      type: USER_PROFILE_FAIL,\n      payload:\n        error.response && error.response.data.message\n          ? error.response.data.message\n          : error.message,\n    });\n  }\n};\n\n// User's update profile, utilisé quand on veut mettre a jours son profil\nexport const updateUserProfile =\n  (token, newUserName, newFirstName, newLastName) => async (dispatch) => {\n    try {\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n      };\n\n      const { data } = await axios.put(\n        \"http://localhost:3001/api/v1/user/profile\", //Renvoie requête PUT avec le token auth en en-têtes\n        {\n          userName: newUserName,\n          firstName: newFirstName,\n          lastName: newLastName,\n        },\n        config\n      );\n\n      dispatch({ type: USER_PROFILE_UPDATE, payload: data });\n    } catch (error) {\n      dispatch({\n        type: USER_PROFILE_FAIL,\n        payload:\n          error.response && error.response.data.message\n            ? error.response.data.message\n            : error.message,\n      });\n    }\n  };\n\n// Logout action, appeller quand utilisateur se déconnecte\nexport const logout = () => async (dispatch) => {\n  //Renvoie 2 actions, un epour ce deco et une pour reset les infos a la déco\n  dispatch({ type: USER_LOGOUT });\n  dispatch({ type: USER_PROFILE_RESET });\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}